webpackJsonp([1],{0:function(e,s,t){t("j1ja"),e.exports=t("NHnr")},1:function(e,s){},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("7+uW"),n=t("8+8L"),a=t("NO98"),i=t.n(a),o=t("82a9"),l=t.n(o),u={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title mb-0"},[e._v(e._s(e.provider.name))]),e._v(" "),e.provider.address?t("p",[e._v(e._s(e.provider.address))]):e._e(),e._v(" "),t("ul",{staticClass:"list-unstyled mb-0"},[e.provider.phone?t("li",[t("span",{staticClass:"fa fa-fw fa-phone",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("Phone:")]),e._v(" "),t("a",{attrs:{href:"tel:"+e.provider.phone}},[e._v("\n        "+e._s(e.formatPhone(e.provider.phone))+"\n      ")])]):e._e(),e._v(" "),e.provider.fax?t("li",[t("span",{staticClass:"fa fa-fw fa-fax",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("Fax:")]),e._v(" "),t("a",{attrs:{href:"fax:"+e.provider.fax}},[e._v("\n        "+e._s(e.formatPhone(e.provider.fax))+"\n      ")])]):e._e(),e._v(" "),e.provider.email?t("li",[t("span",{staticClass:"fa fa-fw fa-envelope",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("Email:")]),e._v(" "),t("a",{attrs:{href:"mailto:"+e.provider.email},domProps:{textContent:e._s(e.provider.email)}}),t("br")]):e._e(),e._v(" "),e.provider.website?t("li",[t("span",{staticClass:"fa fa-fw fa-globe",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("Web:")]),e._v(" "),t("a",{attrs:{href:e.provider.website,target:"_blank"}},[e._v("Website")])]):e._e()])])},staticRenderFns:[]},c=t("VU/8")({name:"provider",props:["provider"],methods:{formatPhone:function(e){return"("+e.substring(0,3)+") "+e.substring(3,6)+"-"+e.substring(6,10)}}},u,!1,null,null,null).exports,d=t("fZjL"),h=t.n(d),f={name:"schedule",props:["schedule"],computed:{scheduleKeys:function(){return h()(this.schedule)}}},p={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("table",{staticClass:"table table-striped table-bordered mb-0"},[t("tbody",e._l(e.scheduleKeys,function(s){return t("tr",{key:s},[t("th",[e._v("\n        "+e._s(e.schedule[s].heading)+"\n        "),t("p",{staticClass:"small mb-0"},[e._v("Next Pickup(s)")])]),e._v(" "),t("td",[t("strong",[e._v("\n          "+e._s(e.schedule[s].weekdays)+"\n        ")]),e._v(" "),t("ul",{staticClass:"mb-0"},e._l(e.schedule[s].nextDates,function(s,r){return t("li",{key:r},[s.isHoliday?t("span",[t("del",[e._v("\n                "+e._s(s.date.format("dddd MMMM Do"))+"\n              ")]),e._v(" "),t("small",{staticClass:"ml-1 badge badge-pill badge-danger"},[e._v("\n                No pickup on holiday\n              ")])]):[e._v("\n              "+e._s(s.date.format("dddd MMMM Do"))+"\n            ")]],2)}))])])}))])},staticRenderFns:[]},v=t("VU/8")(f,p,!1,null,null,null).exports,j=t("d7EF"),m=t.n(j),y=t("Zrlr"),g=t.n(y),b=t("wxAW"),w=t.n(b),k=t("Meid"),_=t("rdLu"),x=t.n(_),F=function(){function e(s){return g()(this,e),x.a.find(e.all(),function(e){return x.a.contains(e.ids,s.NAME)})}return w()(e,null,[{key:"findByLocation",value:function(s){return Object(k.loadModules)(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(t){var r=m()(t,2),n=r[0],a=r[1],i=new n({url:e.esri.url}),o=new a;return o.geometry=s,o.returnGeometry=!1,o.outFields=e.esri.fields,i.execute(o).then(function(s){return s.features.length?new e(s.features[0].attributes):null})})}},{key:"all",value:function(){return[{ids:["CITY OF TAMPA"],name:"City of Tampa",phone:"8132748811",website:"https://www.tampagov.net/solid-waste/programs"},{ids:["TEMPLE TERRACE"],name:"City of Temple Terrace",phone:"8135066570",email:"pwcustservice@templeterrace.com",website:"http://templeterrace.com/188/Sanitation/"},{ids:["CITY OF PLANT CITY"],name:"City of Plant City",address:"1802 Spooner Drive, Plant City, FL 33563",phone:"8137579208",fax:"8137579049",email:"jsessions@plantcitygov.com",website:"https://www.plantcitygov.com/64/Solid-Waste"}]}},{key:"esri",get:function(){return{url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/MaintStar/MapServiceBaseMap_20150801_Production_1/MapServer/80",fields:["NAME"]}}}]),e}(),C=function(){function e(s){return g()(this,e),x.a.find(e.all(),function(e){return x.a.contains(e.ids,parseInt(s.TAG))})}return w()(e,null,[{key:"findByLocation",value:function(s){return Object(k.loadModules)(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(t){var r=m()(t,2),n=r[0],a=r[1],i=new n({url:e.esri.url}),o=new a;return o.geometry=s,o.returnGeometry=!1,o.outFields=e.esri.fields,i.execute(o).then(function(t){return t.features.length?new e(t.features[0].attributes):F.findByLocation(s).then(function(e){return e})})})}},{key:"all",value:function(){return[{ids:[1,3],name:"Republic Services",address:"5210 W Linebaugh Ave, Tampa, FL 33624",phone:"8132650292",fax:"8139613534",email:"republicservicesCSR@repsrv.com",website:"http://republicservices.com"},{ids:[2,5],name:"Waste Connections, Inc.",address:"5135 Madison Ave, Tampa, FL 33619",phone:"8132483802",fax:"8132483606",email:"cs-tampa@progressivewaste.com",website:"http://progressivewaste.com"},{ids:[4],name:"Waste Management of Tampa",address:"3411 N 40th St, Tampa, FL 33605",phone:"8136213053",fax:"8137408210",email:"CentralFloridaService@wm.com",website:"http://wm.com"}]}},{key:"esri",get:function(){return{url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/SW_FACILITIES/MapServer/1",fields:["TAG"]}}}]),e}(),W=t("//Fk"),P=t.n(W),S=t("PJh5"),E=t.n(S),R=function(){function e(s){g()(this,e);var t=this.rawDbValToDayInts(s.Garbage),r=this.rawDbValToDayInts(s.Recycling),n=this.rawDbValToDayInts(s.YardWaste);return{garbage:{heading:"Garbage Days",weekdays:this.pluralWeekdaysFromInts(t),nextDates:this.nextPickupDates(t)},recycle:{heading:"Recycling Days",weekdays:this.pluralWeekdaysFromInts(r),nextDates:this.nextPickupDates(r,!0)},yard:{heading:"Yard Waste Days",weekdays:this.pluralWeekdaysFromInts(n),nextDates:this.nextPickupDates(n)}}}return w()(e,[{key:"rawDbValToDayInts",value:function(e){return x.a.chain(E()()._locale._weekdaysShort).map(function(s,t){return!!(e.toLowerCase().indexOf(s.toLowerCase())>=0)&&t}).compact().value()}},{key:"pluralWeekdaysFromInts",value:function(e){return e.sort().map(function(e){return E()()._locale._weekdays[e]+"s"}).join(" & ")}},{key:"nextPickupDates",value:function(s){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=null,a=!1;return x.a.each(s,function(i,o){for(n=e.nextDayOfWeek(i),a=e.isHoliday(n,t),r.push({date:n,isHoliday:a});a;)i=o+1===s.length?s[0]:s[o+1],n=e.nextDayOfWeek(i,n),a=e.isHoliday(n,t),r.push({date:n,isHoliday:a})}),x.a.chain(r).sortBy(function(e){return e.date.valueOf()}).uniq(function(e){return e.date.valueOf()},!0).value()}}],[{key:"nextDayOfWeek",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=s?E()(s).add(1,"days"):E()();return t.isoWeekday()<=e?t.isoWeekday(e):t.add(1,"weeks").isoWeekday(e)}},{key:"isHoliday",value:function(e){var s,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e=E()(e.valueOf())).date(),n=e.month()+1,a=e.day(),i=e.endOf("month").date();return("1/1"!==(s=[n,r].join("/"))||!t)&&("1/1"===s||"7/4"===s||"12/25"===s||("9/1/1"===(s=[n,Math.floor((r-1)/7)+1,a].join("/"))||"11/4/4"===s||"5/1/1"===(s=[n,Math.floor((i-r-1)/7)+1,a].join("/"))))}},{key:"findByFolio",value:function(s){return s?Object(k.loadModules)(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(t){var r=m()(t,2),n=r[0],a=r[1],i=new n({url:e.esri.url}),o=new a;return o.where=s?e.esri.fKey+"="+s:"1=0",o.returnGeometry=!1,o.outFields=e.esri.fields,i.execute(o).then(function(s){return s.features.length?new e(s.features[0].attributes):null})}):P.a.resolve(null)}},{key:"esri",get:function(){return{url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/SW_HAULER_DATA2/MapServer/1",fields:["*"],fKey:"Folio"}}}]),e}(),z=t("mvHQ"),T=t.n(z),M=t("woOf"),D=t.n(M),O=t("Gu7T"),L=t.n(O),A={methods:{loggly:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];var r=D.a.apply(Object,[{}].concat(L()(s)));this.$http.post("https://logs-01.loggly.com/inputs/ff424bed-98df-4ab6-ac0e-49dc5d9ae378/tag/hc-trash-hauler/",T()(r),{headers:{"Content-Type":"text/plain"}})}}},H={name:"App",components:{HcEsriSearchWidget:l.a,HcErrorAlerts:i.a,ProviderResult:c,ScheduleResult:v},mixins:[A],data:function(){return{searchResult:null,provider:null,schedule:null,errors:[]}},methods:{reset:function(){this.$refs.searchWidget.isSearching=!1,this.searchResult=null,this.provider=null,this.parcel=null,this.schedule=null,this.errors=[],this.$refs.errorAlerts.clearAlerts()},handleResult:function(e){var s=this;this.searchResult=e,this.searchResult.error?this.handleError(this.searchResult.error):this.searchResult.hasFeature()&&(this.$refs.searchWidget.isSearching=!0,this.findProvider().then(this.findSchedule).then(function(){if(!s.provider&&!s.schedule)throw new Error("A Solid Waste Provider and Schedule could not be determined.");if(s.provider&&!s.schedule)throw new Error("We weren't able to find your trash and recycling schedule, but we know who your hauler is. Contact the provider listed below for your pickup schedule.")}).catch(this.handleError).then(function(){s.$refs.searchWidget.status=null,s.$refs.searchWidget.isSearching=!1,s.loggly(s.$data)}))},findProvider:function(){var e=this;return this.$refs.searchWidget.status="Finding Trash/Recycling Provider...",C.findByLocation(this.searchResult.result.feature.geometry).then(function(s){e.provider=s}).catch(this.handleError)},findSchedule:function(){var e=this;return this.$refs.searchWidget.status="Finding Parcel...",this.$refs.searchWidget.queryFeatures(o.Parcel.esriSearchSource.featureLayer.url).then(function(e){return new o.Parcel(e)}).then(function(s){return e.$refs.searchWidget.status="Finding Trash/Recycling Schedule...",R.findByFolio(s.folio).then(function(s){e.schedule=s})}).catch(this.handleError)},handleError:function(e){console.warn(e),this.$refs.errorAlerts.addAlert(e),this.errors.push(e.message)}},computed:{isDev:function(){return!1}}},I={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"app"}},[t("HcEsriSearchWidget",{ref:"searchWidget",tag:"form",on:{submit:e.reset,result:e.handleResult}}),e._v(" "),t("HcErrorAlerts",{ref:"errorAlerts",tag:"div"}),e._v(" "),e.provider||e.schedule?t("div",{staticClass:"card mb-3"},[t("strong",{staticClass:"card-header bg-secondary text-white"},[e._v("\n      Results for:\n      "+e._s(e.searchResult.result.name)+"\n    ")]),e._v(" "),e.provider?t("ProviderResult",{tag:"div",staticClass:"text-center",attrs:{provider:e.provider}}):e._e(),e._v(" "),e.schedule?t("ScheduleResult",{tag:"div",attrs:{schedule:e.schedule}}):e._e()]):e._e(),e._v(" "),e.isDev?t("details",{attrs:{open:""}},[t("pre",[e._v(e._s(e.$data))])]):e._e()])},staticRenderFns:[]},N=t("VU/8")(H,I,!1,null,null,null).exports;r.a.use(n.a),r.a.config.productionTip=!1,new r.a({el:"#HcHaulerApp",components:{App:N},template:"<App/>"})},uslO:function(e,s,t){var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(e){return t(a(e))}function a(e){var s=r[e];if(!(s+1))throw new Error("Cannot find module '"+e+"'.");return s}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id="uslO"}},[0]);
//# sourceMappingURL=app.js.map